# 📝 Week 04 Assignment - Supabase Auth with SPA Routing

## 🚀 Overview

4주차 과제는 Supabase 인증 기능을 구현하고, SPA(Single Page Application) 라우팅을 적용하는 것이 목표였습니다.<br />
회원가입 / 로그인 / 프로필 페이지를 구현하면서 Supabase와 React를 연동하고,<br />
실시간 인증 상태 변화에 맞게 UI를 업데이트하는 흐름을 직접 경험했습니다.

추가적으로, 저는 개인적인 취향을 반영해 Gorillaz 테마로 UI를 커스터마이징했습니다.

## 🎥 Demo

- 회원가입 → Supabase Authentication Users 및 Profiles 테이블에 반영
- 로그인 → Profile 탭 이동 후 사용자 정보 표시
- 프로필 페이지 → 이름(username), 이메일(email), 소개(bio) 조회 및 수정 가능
- 잘못된 입력 시 유효성 검사 및 토스트 알림 표시

![Demo](./demo.gif)

## ⚒️ Troubleshooting

이 과제를 진행하면서 다양한 문제를 겪었고, 해결 과정을 기록했습니다.

1. 환경변수 로드 문제

- 문제 😵‍💫
  - `import.meta.env.VITE_SUPABASE_URL` 이 undefined 로 표시
  - 브라우저 콘솔에서 `import.meta` 직접 호출 시 에러 발생
  - 이미지 경로도 제대로 로드되지 않음
- 해결 🤩
  - 개발 서버 재시작으로 환경변수 다시 로드
  - 이미지는 Vite의 asset import 방식 사용
  ***

2. Supabase 세션 타임아웃 에러

- 문제 😵‍💫
  - `supabase.auth.getSession()` 호출 시 5초 이상 응답 없음
  - "Session timeout" 에러 발생
  - ProfilePage 로딩이 무한 대기 상태
- 원인 ❗️
  - Supabase URL/API Key를 하드코딩과 환경변수 혼용 → 충돌
- 해결 🤩
  - 개발 서버 재시작으로 환경변수 다시 로드
  - 이미지는 Vite의 asset import 방식 사용
  ***

3. RLS(Row Level Security) 정책 누락

- 문제 😵‍💫
  - 로그인 세션은 존재하지만 profiles 테이블 조회가 불가 → 빈 데이터 반환
- 원인 ❗️
  - Supabase에서 profiles 테이블의 SELECT 정책 미설정
- 해결 🤩
  - RLS 정책 추가
  ***

4. 컴포넌트 리렌더링 무한 루프

- 문제 😵‍💫
  - ProfilePage가 계속 "프로필을 불러오는 중..." 상태에 머무름
- 해결 🤩
  - App.tsx에서 불필요하게 복잡한 상태 관리 제거
  - 각 페이지(SignIn, SignUp, Profile)에서 독립적으로 상태 관리
  ***

## 💭 Retrospective

이번 주 수업은 목요일까지만 해도 솔직히 물 속에서 듣는 느낌이었다.
강사님께서는 열심히 말씀하시는데 나는 전혀 듣지를 못 하고 진짜 말 그대로 물 안에서 듣는 느낌이었다. 😢 (이거 말고는 달리 표현할 말이 생각 나지 않는다..)<br />
그런데 금요일 수업은 눈이 말똥말똥하고 귀가 활짝 열린 상태로 들었다.<br />
오랜만에 백엔드를 다뤄서 그런지, SQL도 반가웠고 전반적으로 매우 즐겁게 수업을 들었다.<br />

하지만 과제 수행은 전혀 달랐다. 확실히 연습이 많이 필요하다고 느꼈다.<br />
강사님의 코드가 없으니 너무 막막했다. 그래서 이번 과제는 AI의 도움을 조금 곁들였는데, 어려웠지만 그만큼 재밌는 과제 수행이었다.<br />

과제 제출 과정에서 깃과의 충돌 과정이 있었다...<br />
예상치 못 한 이슈여서 매우 당황했고, 당연히 잘 될 줄 알고 마감시간 5분 전에 푸시를 했는데, 갑자기 푸시가 안 되는 상황이 발생한 것이다. ㅠㅠ<br />
알고 보니, 이번 과제에 적용한 배경 이미지와 캐릭터 이미지의 용량이 커서 깃이 올리지 못 하는 상황이 생긴 것이다.<br />
이번 이슈를 통해 또 다른 교훈을 얻었다.<br />
첫째, 과제는 미리미리 끝내자.. 미리 끝냈으면 이렇게 전전긍긍하며 머리 아플 일도 없고, 밤늦게 강사님께 연락드릴 일도 없지 않았겠냐.<br /> 둘째, 용량 관리 잘 하자..<br />
이 문제를 해결하려고 별 해결 방법을 다 동원했지만 결국 커밋 기록이 지워지고 말았다. 너무 절망적이지만 어쩔 수 있겠나..! 이번 과제에 대한 미련은 이제 버리고, 현업에서나 이런 일이 없도록 주의하자!!!<br />

아무튼..<br />
솔직히 요즘 수업 따라가기 너무 힘들다..<br />
하지만 _“이 또한 지나가리라”_ 라는 모토로 수업을 듣고 있다.
매일 반복하고 듣고 읽다 보면 언젠가는 익숙해질 것이라 믿는다.<br />
인간은 적응의 동물이고, 프로그래밍 언어도 결국 또 하나의 언어일 뿐이다.<br />

이번 과제를 하면서 느낀 점은 **"혼자 끙끙대기보다 일단 부딪히고, 막히면 질문하고, 필요하면 AI의 도움도 적극 활용하자"** 였다.<br />
처음에는 모든 게 낯설고 두렵지만, 시행착오를 겪으면서 해결해 나가다 보니 점점 자신감도 붙는다.<br />

다음주도 파이팅하자 ~
